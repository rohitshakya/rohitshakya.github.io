<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Event Logging System | Rohit Shakya</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Event Logging System" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Audit Log Service – Distributed Event Logging System" /> <meta property="og:description" content="Audit Log Service – Distributed Event Logging System" /> <link rel="canonical" href="http://localhost:4000/projects/audit-log-service" /> <meta property="og:url" content="http://localhost:4000/projects/audit-log-service" /> <meta property="og:site_name" content="Rohit Shakya" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2025-11-01T00:00:00+05:30" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Event Logging System" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-11-01T00:00:00+05:30","datePublished":"2025-11-01T00:00:00+05:30","description":"Audit Log Service – Distributed Event Logging System","headline":"Event Logging System","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/projects/audit-log-service"},"url":"http://localhost:4000/projects/audit-log-service"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> <link rel="stylesheet" href="/css/main.css"> </head> <body> <header class="site-header"> <nav class="navbar navbar-default"> <div class="container-fluid"> <!-- Brand and toggle get grouped for better mobile display --> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Rohit Shakya</a> </div> <!-- Collect the nav links, forms, and other content for toggling --> <div class="collapse navbar-collapse " id="bs-example-navbar-collapse-1"> <ul class="nav navbar-nav navbar-right"> <li><a class="navbar-brand" style="font-size: 1.2em" href="/projects/">Projects</a></li> <!-- <li><a class="navbar-brand" style="font-size: 1.2em" href="/skills/">Skills</a></li> --> <li><a class="navbar-brand" style="font-size: 1.2em" href="/resume/">Resume</a></li> </ul> </div><!-- /.navbar-collapse --> </div><!-- /.container-fluid --> </nav> </header> <div class="container"> <div class="wrapper"> <div class="row"> <div class="col-md-2"></div> <div class="col-md-8"> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <h1 class="post-title" itemprop="name headline">Event Logging System</h1> <h4 style="text-decoration-color: grey" itemprop="name headline">Tech Involved - Java, Spring Boot, Kafka, ClickHouse, Elasticsearch, Redis, S3, Microservices, AWS</h4> <h4 style="text-decoration-color: grey" itemprop="name headline">Checkout the github repo - <a href="https://github.com/rohitshakya" target="_blank" rel="noopener noreferrer"> github.com/rohitshakya </a> </h4> </header> <div class="post-content" itemprop="articleBody"> <br> <h1 id="audit-log-service--distributed-event-logging-system">Audit Log Service – Distributed Event Logging System</h1> <p>The <strong>Audit Log Service</strong> captures, stores, indexes, and retrieves all critical events happening across a distributed microservices architecture.<br /> It provides <strong>complete traceability</strong>, <strong>non-repudiation</strong>, and <strong>high-performance event search</strong>, essential for debugging, compliance, security, and analytics.</p> <p>Designed for large-scale platforms, the system handles <strong>millions of audit events per day</strong> with strict guarantees around sequencing, immutability, and reliability.</p> <hr /> <h2 id="description">Description</h2> <p>The service records every meaningful action performed across the platform:</p> <ul> <li>User actions (login, profile updates, payments, chats)</li> <li>Admin actions (moderation, edits, approvals)</li> <li>System events (workflows, auto-assignments, notifications)</li> <li>Data changes (CRUD events, mutations, side-effects)</li> </ul> <p>Each event is enriched with metadata (IP, device ID, source app, timestamp, user ID, trace ID) and stored in a <strong>tamper-proof, append-only architecture</strong>.</p> <p>The system supports:</p> <ul> <li>Real-time streaming of logs</li> <li>Efficient querying &amp; filtering</li> <li>High-performance writes</li> <li>Secure retention and archival</li> <li>Cross-service traceability for debugging</li> </ul> <hr /> <h2 id="key-capabilities-delivered">Key Capabilities Delivered</h2> <h3 id="1-logging-sdk-client-library"><strong>1. Logging SDK (Client Library)</strong></h3> <ul> <li>Lightweight SDK for all microservices</li> <li>Auto-capture: trace ID, span ID, user ID, timestamp</li> <li>Non-blocking async logging</li> <li>Batch + retry logic</li> <li>Kafka producer wrapper with idempotence</li> </ul> <hr /> <h3 id="2-ingestion-pipeline-kafka--processor"><strong>2. Ingestion Pipeline (Kafka → Processor)</strong></h3> <ul> <li>Kafka topics segregated by domain (auth, payments, chat…)</li> <li>Horizontal consumers for high throughput</li> <li>Enrichment layer (geo-ip, device metadata, correlation ID)</li> <li>DLQs for poison messages</li> <li>Fault-tolerant retries</li> </ul> <hr /> <h3 id="3-storage-layer"><strong>3. Storage Layer</strong></h3> <ul> <li><strong>ClickHouse</strong> for high-speed analytical queries</li> <li><strong>Elasticsearch</strong> for full-text search</li> <li><strong>S3</strong> for cold storage and long-term archival</li> <li>Partitioned by date, domain, service name</li> </ul> <p>This ensures <strong>high-write, low-cost, and query-optimized</strong> architecture.</p> <hr /> <h3 id="4-query-service-read-apis"><strong>4. Query Service (Read APIs)</strong></h3> <ul> <li>Filter logs by: <ul> <li>userId, service, action, time range, event type</li> </ul> </li> <li>Paginated search with ES &amp; CH hybrid strategy</li> <li>Sub-second responses for large time ranges</li> <li>Structured and unstructured event retrieval</li> <li>Secure access with RBAC</li> </ul> <hr /> <h3 id="5-compliance--security"><strong>5. Compliance &amp; Security</strong></h3> <ul> <li>Immutable append-only design</li> <li>Hash-chained log entries (optional)</li> <li>Access logs for every read operation</li> <li>GDPR retention policies via lifecycle rules</li> <li>PII masking before storage (optional)</li> </ul> <hr /> <h2 id="impact">Impact</h2> <ul> <li>Enabled <strong>100% traceability</strong> of user &amp; system actions across dozens of microservices</li> <li>Reduced debugging time during incidents by <strong>60–70%</strong></li> <li>High-throughput pipeline handling <strong>5M+ events/day</strong></li> <li>Sub-second search &amp; filtering for operations teams</li> <li>Delivered audit trails required for <strong>internal compliance &amp; security audits</strong></li> <li>Highly scalable, cost-efficient log storage with tiered architecture</li> </ul> <hr /> <h2 id="technology-stack">Technology Stack</h2> <ul> <li><strong>Backend:</strong> Java, Spring Boot, Kotlin</li> <li><strong>Log Pipeline:</strong> Kafka, Kafka Streams (optional), SQS</li> <li><strong>Databases:</strong> ClickHouse, Elasticsearch, MySQL (metadata)</li> <li><strong>Caching:</strong> Redis</li> <li><strong>Storage:</strong> AWS S3</li> <li><strong>Infra:</strong> Docker, Kubernetes, Nginx</li> <li><strong>Monitoring:</strong> Prometheus, Grafana, Jaeger</li> <li><strong>Other:</strong> <ul> <li>CDC (Debezium) for DB change capture</li> <li>OpenTelemetry tracing</li> <li>RBAC authorization layer</li> <li>DLQs for resilience</li> </ul> </li> </ul> <hr /> <h2 id="high-level-architecture">High-Level Architecture</h2> <p><strong>Microservices → SDK → Kafka → Log Processor → ClickHouse/Elasticsearch → Query APIs → Dashboard</strong></p> <hr /> <h2 id="setting-up-generic-template">Setting Up (Generic Template)</h2> <p>```bash git clone https://github.com/rohitshakya cd audit-log-service/ ./gradlew build</p> </div> </article> <div class="row"> <ul class="pager"> <li> <a class="previous" href="/projects/product-catalog"> Product Catalog Service &raquo;</a> </li> </ul> <ul class="pager"> <li> <a class="next" href="#" onclick="disqus();return false;">Show Comments &dArr;</a> </li> </ul> </div> </div> <div class="col-md-2"></div> <div class="row"> <div id="disqus_thread"></div> <script defer> var disqus_loaded = false; function disqus() { if (!disqus_loaded) { disqus_loaded = true; var d = document, s = d.createElement('script'); s.src = '//rohitshakya-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); } } </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </div> </div> </div> <footer> <div class="container"> <div class="row p20"> <div class="col-md-12 text-center mt25"> © 2025 <strong>Rohit Shakya</strong> </div> </div> </div> </footer> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script> <script src="/js/bootstrap.min.js"></script> </body> </html>